{"ast":null,"code":"import _toConsumableArray from \"/Users/kristinatong/projects/sound-motion/sound-motion-frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"/Users/kristinatong/projects/sound-motion/sound-motion-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nvar defaultSpriteState = {\n  // sprites: [\n  //   {id:1, name: 'guitar', url: 'https://image.flaticon.com/icons/png/128/26/26843.png'},\n  //   {id:2, name: 'drums', url: 'https://image.flaticon.com/icons/svg/27/27328.svg'},\n  //   {id:3, name: 'piano', url: 'https://image.flaticon.com/icons/svg/27/27066.svg'},\n  //   {id:4, name: 'drums2', url: 'https://image.flaticon.com/icons/svg/26/26995.svg'}\n  // ],\n  sprites: [],\n  canvasSprites: [],\n  selectedSprite: {},\n  playPreview: false\n};\nexport default function spriteReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : defaultSpriteState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  var index;\n  var sprite;\n\n  switch (action.type) {\n    case 'SET_SPRITES':\n      return _objectSpread({}, state, {\n        sprites: action.sprites\n      });\n\n    case 'ADD_SPRITE':\n      sprite = _objectSpread({}, action.sprite, {\n        position: {\n          x: 0,\n          y: 0\n        }\n      });\n      return _objectSpread({}, state, {\n        canvasSprites: _toConsumableArray(state.canvasSprites).concat([sprite]),\n        selectedSprite: action.sprite\n      });\n\n    case 'SELECT_SPRITE':\n      var findSprite = state.canvasSprites.find(function (sprite) {\n        return sprite.uniqueKey === action.uniqueKey;\n      });\n      return _objectSpread({}, state, {\n        selectedSprite: findSprite\n      });\n\n    case 'SELECT_SOUND':\n      index = state.canvasSprites.findIndex(function (sprite) {\n        return sprite.uniqueKey === action.payload.uniqueKey;\n      });\n      sprite = state.canvasSprites[index];\n      return _objectSpread({}, state, {\n        selectedSprite: _objectSpread({}, state.selectedSprite, {\n          sound: _objectSpread({}, action.payload.selectedSound, {\n            url: action.payload.url,\n            loop: action.payload.loop\n          })\n        }),\n        canvasSprites: _toConsumableArray(state.canvasSprites.slice(0, index)).concat([Object.assign({}, sprite, {\n          sound: _objectSpread({}, action.payload.selectedSound, {\n            url: action.payload.url,\n            loop: action.payload.loop\n          })\n        })], _toConsumableArray(state.canvasSprites.slice(index + 1))),\n        playPreview: false\n      });\n\n    case 'LOOP_SOUND':\n      index = state.canvasSprites.findIndex(function (sprite) {\n        return sprite.uniqueKey === state.selectedSprite.uniqueKey;\n      });\n      sprite = state.canvasSprites[index];\n      return _objectSpread({}, state, {\n        selectedSprite: _objectSpread({}, state.selectedSprite, {\n          sound: _objectSpread({}, state.selectedSprite.sound, {\n            loop: !state.selectedSprite.sound.loop\n          })\n        }),\n        canvasSprites: _toConsumableArray(state.canvasSprites.slice(0, index)).concat([Object.assign({}, sprite, {\n          sound: _objectSpread({}, state.selectedSprite.sound, {\n            loop: !state.selectedSprite.sound.loop\n          })\n        })], _toConsumableArray(state.canvasSprites.slice(index + 1)))\n      });\n\n    case 'CLEAR_SELECTED':\n      return _objectSpread({}, state, {\n        selectedSprite: {}\n      });\n\n    case 'CHANGE_DJ_MODE':\n      state.canvasSprites.forEach(function (sprite) {\n        if (document.getElementById(sprite.uniqueKey)) {\n          var player = document.getElementById(sprite.uniqueKey);\n          player.pause();\n          player.currentTime = 0;\n        } else {\n          var _player = document.createElement(\"AUDIO\");\n\n          _player.id = sprite.uniqueKey;\n\n          _player.setAttribute(\"src\", sprite.sound.url); // player.autoplay = true\n\n\n          _player.loop = sprite.sound.loop;\n\n          _player.load();\n\n          document.body.appendChild(_player);\n        }\n      });\n      return state;\n\n    case 'SET_SPRITE_POSITION':\n      index = state.canvasSprites.findIndex(function (sprite) {\n        return sprite.uniqueKey === action.payload.uniqueKey;\n      });\n      sprite = state.canvasSprites[index];\n      return _objectSpread({}, state, {\n        canvasSprites: _toConsumableArray(state.canvasSprites.slice(0, index)).concat([Object.assign({}, sprite, {\n          position: action.payload.position\n        })], _toConsumableArray(state.canvasSprites.slice(index + 1)))\n      });\n\n    case 'PLAY_PREVIEW':\n      return _objectSpread({}, state, {\n        playPreview: true\n      });\n\n    default:\n      return state;\n  }\n}","map":{"version":3,"sources":["/Users/kristinatong/projects/sound-motion/sound-motion-frontend/src/redux/reducers/spriteReducer.js"],"names":["defaultSpriteState","sprites","canvasSprites","selectedSprite","playPreview","spriteReducer","state","action","index","sprite","type","position","x","y","findSprite","find","uniqueKey","findIndex","payload","sound","selectedSound","url","loop","slice","Object","assign","forEach","document","getElementById","player","pause","currentTime","createElement","id","setAttribute","load","body","appendChild"],"mappings":"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","sourcesContent":["const defaultSpriteState = {\n  // sprites: [\n  //   {id:1, name: 'guitar', url: 'https://image.flaticon.com/icons/png/128/26/26843.png'},\n  //   {id:2, name: 'drums', url: 'https://image.flaticon.com/icons/svg/27/27328.svg'},\n  //   {id:3, name: 'piano', url: 'https://image.flaticon.com/icons/svg/27/27066.svg'},\n  //   {id:4, name: 'drums2', url: 'https://image.flaticon.com/icons/svg/26/26995.svg'}\n  // ],\n  sprites: [],\n  canvasSprites: [],\n  selectedSprite: {},\n  playPreview: false\n};\n\nexport default function spriteReducer(state = defaultSpriteState, action) {\n  let index\n  let sprite\n  switch (action.type) {\n    case 'SET_SPRITES':\n      return { ...state,\n        sprites: action.sprites\n      }\n    case 'ADD_SPRITE':\n      sprite = {...action.sprite,position:{x:0,y:0}}\n      return { ...state,\n        canvasSprites: [...state.canvasSprites, sprite],\n        selectedSprite: action.sprite\n      }\n    case 'SELECT_SPRITE':\n      const findSprite = state.canvasSprites.find(sprite => sprite.uniqueKey === action.uniqueKey)\n      return { ...state,\n        selectedSprite: findSprite\n      }\n    case 'SELECT_SOUND':\n      index = state.canvasSprites.findIndex(sprite => sprite.uniqueKey === action.payload.uniqueKey)\n      sprite = state.canvasSprites[index]\n      return {\n        ...state,\n        selectedSprite: { ...state.selectedSprite,\n          sound: { ...action.payload.selectedSound,\n            url: action.payload.url,\n            loop: action.payload.loop\n          }\n        },\n        canvasSprites: [\n          ...state.canvasSprites.slice(0, index),\n          Object.assign({}, sprite, {\n            sound: { ...action.payload.selectedSound,\n              url: action.payload.url,\n              loop: action.payload.loop\n            }\n          }),\n          ...state.canvasSprites.slice(index + 1)\n        ],\n        playPreview: false\n      }\n    case 'LOOP_SOUND':\n      index = state.canvasSprites.findIndex(sprite => sprite.uniqueKey === state.selectedSprite.uniqueKey)\n      sprite = state.canvasSprites[index]\n      return { ...state,\n        selectedSprite: { ...state.selectedSprite,\n          sound: { ...state.selectedSprite.sound,\n            loop: !state.selectedSprite.sound.loop\n          }\n        },\n        canvasSprites: [\n          ...state.canvasSprites.slice(0, index),\n          Object.assign({}, sprite, {\n            sound: { ...state.selectedSprite.sound,\n              loop: !state.selectedSprite.sound.loop\n            }\n          }),\n          ...state.canvasSprites.slice(index + 1)\n        ]\n      }\n    case 'CLEAR_SELECTED':\n      return { ...state,\n        selectedSprite: {}\n      }\n    case 'CHANGE_DJ_MODE':\n      state.canvasSprites.forEach(sprite => {\n        if (document.getElementById(sprite.uniqueKey)) {\n          let player = document.getElementById(sprite.uniqueKey)\n          player.pause();\n          player.currentTime = 0;\n        } else {\n          let player = document.createElement(\"AUDIO\");\n          player.id = sprite.uniqueKey\n          player.setAttribute(\"src\", sprite.sound.url)\n          // player.autoplay = true\n          player.loop = sprite.sound.loop\n          player.load()\n          document.body.appendChild(player)\n        }\n      })\n      return state;\n    case 'SET_SPRITE_POSITION':\n      index = state.canvasSprites.findIndex(sprite => sprite.uniqueKey === action.payload.uniqueKey)\n      sprite = state.canvasSprites[index]\n      return {...state,canvasSprites: [\n          ...state.canvasSprites.slice(0, index),\n          Object.assign({}, sprite, {\n            position: action.payload.position\n          }),\n          ...state.canvasSprites.slice(index + 1)\n        ]}\n    case 'PLAY_PREVIEW':\n      return {...state,playPreview: true}\n    default:\n      return state;\n  }\n}\n"]},"metadata":{},"sourceType":"module"}