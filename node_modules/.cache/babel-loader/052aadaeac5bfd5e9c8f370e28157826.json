{"ast":null,"code":"import _classCallCheck from \"/Users/kristinatong/projects/sound-motion/sound-motion-frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/kristinatong/projects/sound-motion/sound-motion-frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/kristinatong/projects/sound-motion/sound-motion-frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/kristinatong/projects/sound-motion/sound-motion-frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/kristinatong/projects/sound-motion/sound-motion-frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/kristinatong/projects/sound-motion/sound-motion-frontend/src/components/Video.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux'; // import * as actions from '../redux/actions';\n// import { changeSprite } from '../actions/sprite'\n// import Konva from 'konva';\n\nimport { Stage, Layer } from 'react-konva';\nimport SpriteList from './SpriteList';\nimport ControlBar from './ControlBar';\nimport UploadSound from './UploadSound';\nimport { DiffCamEngine } from './diff-cam-engine'; // import * from './adapter-1.0.7'\n\nvar Video =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Video, _Component);\n\n  function Video() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Video);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Video)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {};\n\n    _this.getMotion = function () {\n      var canvas = document.getElementById('motion');\n      var video = document.getElementById('video');\n      var score = document.getElementById('score'); // var test = document.getElementById('test');\n      //\n      // // let ctx = canvas.getContext('2d')\n      //\n      // this.props.canvasSprites.map(sprite => {\n      //   const image = new window.Image();\n      //   image.src = sprite.sprite.url\n      //   if(test){\n      //     test.drawImage(image,1,1)\n      //   }\n      //\n      //\n      // })\n\n      function initSuccess() {\n        DiffCamEngine.start();\n      }\n\n      function initError() {\n        alert('Something went wrong.');\n      }\n\n      function capture(payload) {\n        score.textContent = payload.score;\n      }\n\n      DiffCamEngine.init({\n        video: video,\n        motionCanvas: canvas,\n        initSuccessCallback: initSuccess,\n        initErrorCallback: initError,\n        captureCallback: capture\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Video, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var spriteCanvas = document.getElementsByClassName('konvajs-content')[0].getBoundingClientRect();\n      this.setState({\n        x: spriteCanvas.x,\n        y: spriteCanvas.y,\n        bottom: spriteCanvas.bottom,\n        height: spriteCanvas.height,\n        left: spriteCanvas.left,\n        right: spriteCanvas.right,\n        top: spriteCanvas.top,\n        width: spriteCanvas.width\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var videoStyle = {\n        top: this.state.top,\n        left: this.state.left,\n        position: 'absolute',\n        zIndex: -1,\n        // background: 'gray',\n        width: this.state.width,\n        height: this.state.height\n      };\n      var motionStyle = {\n        top: this.state.top,\n        left: this.state.left,\n        position: 'absolute',\n        zIndex: -1,\n        // background: 'gray',\n        width: this.state.width,\n        height: this.state.height\n      };\n      var testStyle = {\n        top: this.state.top,\n        left: this.state.left,\n        position: 'absolute',\n        zIndex: 4,\n        background: 'red',\n        width: this.state.width,\n        height: this.state.height\n      };\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, React.createElement(\"video\", {\n        id: \"video\",\n        style: videoStyle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }), React.createElement(\"canvas\", {\n        id: \"motion\",\n        style: motionStyle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }), React.createElement(\"canvas\", {\n        id: \"test\",\n        style: testStyle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }), React.createElement(\"span\", {\n        id: \"score\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }), React.createElement(\"script\", {\n        src: \"https://webrtc.github.io/adapter/adapter-1.0.7.js\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }), this.getMotion());\n    }\n  }]);\n\n  return Video;\n}(Component);\n\nfunction mapStateToProps(state) {\n  return {\n    canvasSprites: state.sprite.canvasSprites\n  };\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {};\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Video);","map":{"version":3,"sources":["/Users/kristinatong/projects/sound-motion/sound-motion-frontend/src/components/Video.js"],"names":["React","Component","connect","Stage","Layer","SpriteList","ControlBar","UploadSound","DiffCamEngine","Video","state","getMotion","canvas","document","getElementById","video","score","initSuccess","start","initError","alert","capture","payload","textContent","init","motionCanvas","initSuccessCallback","initErrorCallback","captureCallback","spriteCanvas","getElementsByClassName","getBoundingClientRect","setState","x","y","bottom","height","left","right","top","width","videoStyle","position","zIndex","motionStyle","testStyle","background","mapStateToProps","canvasSprites","sprite","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { connect } from 'react-redux';\n// import * as actions from '../redux/actions';\n// import { changeSprite } from '../actions/sprite'\n// import Konva from 'konva';\nimport { Stage, Layer } from 'react-konva';\nimport SpriteList from './SpriteList'\nimport ControlBar from './ControlBar'\nimport UploadSound from './UploadSound'\nimport { DiffCamEngine } from './diff-cam-engine'\n// import * from './adapter-1.0.7'\n\n\nclass Video extends Component {\n  state = {\n  }\n\n  componentDidMount(){\n    let spriteCanvas = document.getElementsByClassName('konvajs-content')[0].getBoundingClientRect()\n    this.setState({\n      x: spriteCanvas.x,\n      y: spriteCanvas.y,\n      bottom: spriteCanvas.bottom,\n      height: spriteCanvas.height,\n      left: spriteCanvas.left,\n      right: spriteCanvas.right,\n      top: spriteCanvas.top,\n      width: spriteCanvas.width,\n    })\n  }\n\n  getMotion = () => {\n    var canvas = document.getElementById('motion');\n    var video = document.getElementById('video');\n    var score = document.getElementById('score');\n    // var test = document.getElementById('test');\n    //\n    // // let ctx = canvas.getContext('2d')\n    //\n    // this.props.canvasSprites.map(sprite => {\n    //   const image = new window.Image();\n    //   image.src = sprite.sprite.url\n    //   if(test){\n    //     test.drawImage(image,1,1)\n    //   }\n    //\n    //\n    // })\n\n    function initSuccess() {\n      DiffCamEngine.start();\n    }\n\n    function initError() {\n      alert('Something went wrong.');\n    }\n\n    function capture(payload) {\n      score.textContent = payload.score;\n    }\n\n    DiffCamEngine.init({\n      video: video,\n      motionCanvas: canvas,\n      initSuccessCallback: initSuccess,\n      initErrorCallback: initError,\n      captureCallback: capture\n    });\n  }\n  render(){\n    const videoStyle= {\n      top: this.state.top,\n      left: this.state.left,\n      position: 'absolute',\n      zIndex: -1,\n      // background: 'gray',\n      width: this.state.width,\n      height: this.state.height\n    }\n\n    const motionStyle= {\n      top: this.state.top,\n      left: this.state.left,\n      position: 'absolute',\n      zIndex: -1,\n      // background: 'gray',\n      width: this.state.width,\n      height: this.state.height\n    }\n\n    const testStyle= {\n      top: this.state.top,\n      left: this.state.left,\n      position: 'absolute',\n      zIndex: 4,\n      background: 'red',\n      width: this.state.width,\n      height: this.state.height\n    }\n\n    return(\n      <div>\n        <video id=\"video\" style={videoStyle}></video>\n        <canvas id='motion' style={motionStyle}/>\n        <canvas id='test' style={testStyle}/>\n        <span id=\"score\"></span>\n        <script src=\"https://webrtc.github.io/adapter/adapter-1.0.7.js\"></script>\n        {this.getMotion()}\n      </div>\n    )\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    canvasSprites: state.sprite.canvasSprites\n  }\n}\n\nfunction mapDispatchToProps(dispatch){\n  return {}\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Video);\n"]},"metadata":{},"sourceType":"module"}